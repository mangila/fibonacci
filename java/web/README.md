# üåê Web Module

> [!NOTE]
> This README was autogenerated by Junie on 2026-01-23.

The `web` module is the primary interface of the Fibonacci application. It is a robust Spring Boot application that orchestrates computation requests, manages real-time streams, and serves as the bridge to the frontend.

## üöÄ Key Features

- **RESTful API**: Clean endpoints for initiating Fibonacci calculations and querying historical data.
- **Real-time Streaming**:
    - **SSE (Server-Sent Events)**: Unidirectional streaming with automatic reconnection and heartbeats.
    - **WebSockets (STOMP)**: Bi-directional communication for interactive real-time updates.
- **Reactive Database Integration**: Utilizes PostgreSQL `LISTEN/NOTIFY` to react to database changes in real-time without polling.
- **Virtual Threads (Loom)**: Optimized for high-concurrency with Java 25 Virtual Threads.

## üì° Real-time Communication Architecture

### Server-Sent Events (SSE)
Implementation is found in `com.github.mangila.fibonacci.web.sse`.
- **Features**: Includes a custom `SseSessionCache` to manage active streams and a heartbeat mechanism to keep connections alive through proxies/load balancers.
- **Usage**: Typically used for the main "Live Stream" dashboard.

### WebSockets & STOMP
Implementation is found in `com.github.mangila.fibonacci.web.ws`.
- **Features**: Full STOMP support over WebSockets. Includes an `AnonymousHandshakeHandler` for seamless connection management without complex authentication.
- **Usage**: Used for interactive features where bi-directional communication is required.

## ‚öôÔ∏è Configuration

The module is highly configurable via `application.yaml`:

| Property | Description | Default |
| :--- | :--- | :--- |
| `app.livestream.enabled` | Enables PostgreSQL NOTIFY listeners | `true` |
| `app.sse.heartbeat` | Interval for SSE heartbeat events | `15s` |
| `spring.threads.virtual.enabled` | Enable Java Virtual Threads | `true` |
| `spring.datasource.url` | JDBC connection string | `jdbc:postgresql://localhost:5432/fibonacci` |

## üõ† API Endpoints (Brief)

- `POST /api/fibonacci`: Request a new calculation.
- `GET /api/fibonacci/stream`: Connect to the SSE stream.
- `GET /api/fibonacci/history`: Retrieve recent calculation results.
